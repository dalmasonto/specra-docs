---
title: Deployment Guide
description: Deploy your Specra documentation to various hosting platforms. This documentation system supports multiple deployment targets with proper asset path handling.
sidebar_position: 4
icon: rocket
tab_group: guides
---

## Build Commands

### Development
```bash
npm run dev
```
Starts the development server at http://localhost:3000

### Production Build (Vercel/Node.js)
```bash
npm run build
npm start
```
- Uses `standalone` output mode
- Creates optimized build in `.next/` directory
- Start with `npm start` or deploy to Vercel, Railway, etc.
- No basePath needed - assets work at root

### Static Export (GitHub Pages, Netlify, etc.)
```bash
npm run build:export
```
- Uses `export` output mode
- Creates static HTML/CSS/JS in `out/` directory
- Reads deployment config from `specra.config.json`
- Applies basePath automatically when needed

## Deployment Configuration

Edit `specra.config.json` to configure your deployment:

```json
{
  "deployment": {
    "target": "vercel",
    "basePath": "",
    "customDomain": false
  }
}
```

### Configuration Options

#### `target`
Specifies your deployment platform:

- **`vercel`** (default): For Vercel or similar Node.js hosting
  - Uses `npm run build` → creates `.next/` directory
  - Run with `npm start` or deploy to Vercel
  - No basePath needed

- **`github-pages`**: For GitHub Pages without custom domain
  - Uses `npm run build:export` → creates `out/` directory
  - Set `basePath` to your repository name (e.g., `"my-repo"`)
  - Assets will be prefixed with `/my-repo/`

- **`static`** or **`custom-domain-static`**: For static hosting with custom domain
  - Uses `npm run build:export` → creates `out/` directory
  - No basePath needed (custom domain serves from root)
  - Works with Netlify, Cloudflare Pages, GitHub Pages + custom domain, etc.

#### `basePath`
Only used when `target` is `github-pages` and `customDomain` is `false`.

```json
{
  "deployment": {
    "target": "github-pages",
    "basePath": "my-repo",
    "customDomain": false
  }
}
```

#### `customDomain`
Set to `true` when using a custom domain with GitHub Pages.

```json
{
  "deployment": {
    "target": "github-pages",
    "basePath": "",
    "customDomain": true
  }
}
```

## Deployment Scenarios

### Scenario 1: Vercel Deployment
**Goal**: Deploy with `npm start` on Vercel

```json
{
  "deployment": {
    "target": "vercel",
    "basePath": "",
    "customDomain": false
  }
}
```

**Commands**:
```bash
npm run build
npm start  # or deploy to Vercel
```

### Scenario 2: GitHub Pages (username.github.io/repo-name)
**Goal**: Deploy to GitHub Pages without custom domain

```json
{
  "deployment": {
    "target": "github-pages",
    "basePath": "repo-name",
    "customDomain": false
  }
}
```

**Commands**:
```bash
npm run build:export
# Deploy the `out/` folder to GitHub Pages
```

<Callout type="info">
Assets will load from `/repo-name/...`
</Callout>

### Scenario 3: GitHub Pages with Custom Domain
**Goal**: Deploy to GitHub Pages with custom domain (docs.example.com)

```json
{
  "deployment": {
    "target": "custom-domain-static",
    "basePath": "",
    "customDomain": true
  }
}
```

**Commands**:
```bash
npm run build:export
# Deploy the `out/` folder to GitHub Pages
# Configure custom domain in GitHub settings
```

<Callout type="success">
Assets will load from root `/...`
</Callout>

### Scenario 4: Netlify/Cloudflare Pages
**Goal**: Deploy static site to Netlify or Cloudflare Pages

```json
{
  "deployment": {
    "target": "static",
    "basePath": "",
    "customDomain": false
  }
}
```

**Commands**:
```bash
npm run build:export
# Deploy the `out/` folder
```

## How It Works

### Build Process

1. **`npm run build`**: Uses `next.config.mjs` with `output: "standalone"`
   - No basePath applied
   - Creates Node.js server in `.next/`

2. **`npm run build:export`**: Uses `next.config.export.mjs` with `output: "export"`
   - Reads deployment config from `specra.config.json`
   - Applies basePath if needed (GitHub Pages without custom domain)
   - Creates static files in `out/`

### Asset Path Resolution

The `getAssetPath()` utility in `lib/utils.ts` automatically handles asset paths:

```typescript
import { getAssetPath } from '@/lib/utils'

// In your components:
<img src={getAssetPath('/images/logo.png')} />
```

- **Standalone build**: Returns `/images/logo.png`
- **GitHub Pages (basePath="/my-repo")**: Returns `/my-repo/images/logo.png`
- **Custom domain**: Returns `/images/logo.png`

### Environment Variables

BasePath is automatically injected during build:
- Set by Next.js config during static export
- Available as `process.env.__NEXT_ROUTER_BASEPATH`
- No manual environment variables needed

## Switching Between Deployment Targets

You can safely switch between deployment targets by:

1. Update `specra.config.json` → `deployment.target`
2. Run the appropriate build command
3. Deploy to your platform

**Example**: Moving from Vercel to GitHub Pages

```bash
# Before (Vercel)
npm run build && npm start

# Update specra.config.json deployment.target to "github-pages"
# Add basePath: "my-repo"

# After (GitHub Pages)
npm run build:export
# Deploy out/ folder
```

## Troubleshooting

### Assets not loading on GitHub Pages

<Callout type="warning">
- Verify `basePath` matches your repository name exactly
- Ensure `customDomain` is `false`
- Check that you're using `npm run build:export`
</Callout>

### Assets 404 with custom domain

- Set `customDomain: true`
- Clear `basePath` or set to empty string
- Rebuild with `npm run build:export`

### Build works locally but fails on platform

- Ensure you're using the correct build command for your platform
- Verify `deployment.target` matches your hosting platform
- Check platform build settings match the output directory (`out/` for static)

## Best Practices

1. **Version Control**: Commit `specra.config.json` with your deployment settings
2. **Multiple Environments**: Create separate config files if needed (e.g., `specra.config.production.json`)
3. **Testing**: Always test static exports locally with a simple HTTP server:
   ```bash
   npm run build:export
   npx serve out
   ```
4. **Documentation**: Keep deployment settings documented for your team

## Platform-Specific Guides

### Deploying to Vercel

1. Connect your repository to Vercel
2. Set build command: `npm run build`
3. Set output directory: `.next`
4. Deploy!

No additional configuration needed in `specra.config.json` - the default `vercel` target works out of the box.

### Deploying to GitHub Pages

1. Update `specra.config.json`:
   ```json
   {
     "deployment": {
       "target": "github-pages",
       "basePath": "your-repo-name",
       "customDomain": false
     }
   }
   ```

2. Build for static export:
   ```bash
   npm run build:export
   ```

3. Deploy the `out/` folder using GitHub Actions or manually

4. If using a custom domain, update config:
   ```json
   {
     "deployment": {
       "target": "custom-domain-static",
       "customDomain": true
     }
   }
   ```

### Deploying to Netlify

1. Update `specra.config.json`:
   ```json
   {
     "deployment": {
       "target": "static"
     }
   }
   ```

2. Configure Netlify:
   - Build command: `npm run build:export`
   - Publish directory: `out`

3. Deploy!

### Deploying to Cloudflare Pages

Same as Netlify:
- Build command: `npm run build:export`
- Build output directory: `out`
- Framework preset: None (or Next.js Static Export)
